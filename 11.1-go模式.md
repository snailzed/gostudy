# 11.1、go语言模式

## 1、`,ok`模式
- a、判断`map`是否存在某个key
   
       val,ok := map[key] //ok为布尔值，为true时val为值

```go
if value,exists := map1[key];exists{
	fmt.Println("exists")
}
```              
       
- b、判断请求是否存在表单域
     
       val,ok := request.Form["var1"]

```go
if val,exists := request.Form["var"];exists {
	
}
```       
- c、判断类型（类型断言）
      
       var,ok := t.(T)// var为转换后的值              
```go
if var,ok := t.(T);ok {

}
```
- d、检测一个通道`ch`是否关闭

      data,open := <-ch

```go

if data,open := <-ch ;!open{
	return
}

//通道关闭时会自动退出
for input := range ch {
	
}

```

## 2、`defer`模式
- a、关闭文件流

      defer f.Close()
     
- b、解锁一个锁定的资源
    
      mu.Lock()
      defer mu.Unlock()

- c、关闭一个通道

      defer Close(ch)   
      
- d、从panic恢复

      defer func(){
        if err:= recover();err != nil {
          log.Info("\"")
        }
     }() 
     
- e、停止定时器

     
     ticker := time.NewTicker(1)
     defer ticker.Stop()
     
- f、释放一个进程

      p := os.StartProcess()
      defer p.Release()
     
- g、停止性能分析并立即写入     
      
      pprof.StartCPUProfile(f)
      defer pprof.StopCPUProfile()
                                    